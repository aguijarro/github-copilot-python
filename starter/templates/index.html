<!doctype html>
<html id="root">
<head>
  <meta charset="utf-8">
  <title>Sudoku Game</title>
  <link rel="stylesheet" href="/static/styles.css">
  <script>
    // Initialize theme from localStorage or system preference
    const initializeTheme = () => {
      const savedTheme = localStorage.getItem('sudoku-theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = savedTheme || (prefersDark ? 'dark' : 'light');
      
      if (theme === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
      } else {
        document.documentElement.removeAttribute('data-theme');
      }
    };
    
    // Initialize theme before page renders
    initializeTheme();
  </script>
</head>
<body>
  <div class="theme-toggle-container">
    <button id="theme-toggle" class="theme-toggle" title="Toggle dark/light mode" aria-label="Toggle dark/light mode">
      <span class="theme-icon">ğŸŒ™</span>
    </button>
  </div>
  <h1>Sudoku Game</h1>
  <div id="timer" class="timer">â±ï¸ 00:00</div>
  <div class="main-content">
    <div id="sudoku-board"></div>
    <!-- scoreboard-section removed from here to avoid duplicate leaderboard -->
  </div>
  <div class="hint-section">
    <button id="hint-btn" class="hint-button" aria-label="Get a hint for the current puzzle" aria-disabled="false">ğŸ’¡ Hint</button>
    <span id="hint-counter" class="hint-counter" aria-live="polite" aria-atomic="true">Hints: 0</span>
  </div>
  <div class="controls">
    <div class="control-group">
      <label for="difficulty-select">Difficulty:</label>
      <select id="difficulty-select">
        <option value="easy">Easy</option>
        <option value="medium" selected>Medium</option>
        <option value="hard">Hard</option>
      </select>
    </div>
    <div class="control-group">
      <button id="new-game" aria-label="Start a new puzzle game">New Game</button>
      <button id="check-btn" aria-label="Check your current entries for errors">Check</button>
      <button id="check-solution" aria-label="Check if the current puzzle solution is correct">Check Solution</button>
    </div>
    <span id="message" aria-live="assertive" aria-atomic="true" role="alert"></span>
  </div>
  <div id="congratulations-modal" class="modal">
    <div class="modal-content celebration">
      <button class="close-btn" aria-label="Close congratulations modal" type="button">&times;</button>
      <div class="modal-header celebration-header">
        <h2>ğŸ‰ Congratulations! ğŸ‰</h2>
        <p class="celebration-text">You solved the puzzle!</p>
      </div>
      <div class="modal-body celebration-body">
        <div class="modal-stats">
          <div class="stat-item">
            <span class="stat-label">â±ï¸ Time:</span>
            <span class="stat-value" id="modal-time">--:--</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ğŸ“Š Difficulty:</span>
            <span class="stat-value" id="modal-difficulty">Medium</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ğŸ’¡ Hints Used:</span>
            <span class="stat-value" id="modal-hints">0</span>
          </div>
        </div>
      </div>
      <div class="modal-footer celebration-footer">
        <button id="play-again-btn" class="modal-btn celebration-btn" aria-label="Start a new game after celebration">ğŸ® Play Again</button>
      </div>
    </div>
  </div>
  <div id="name-input-modal" class="modal">
    <div class="modal-content name-input">
      <button class="close-btn" aria-label="Close name input modal" type="button">&times;</button>
      <div class="modal-header name-input-header">
        <h2>ğŸ“ Save Your Score</h2>
        <p class="modal-text">Enter your name to save your score</p>
      </div>
      <div class="modal-body name-input-body">
        <input 
          type="text" 
          id="player-name-input" 
          class="name-input-field" 
          placeholder="Enter your name (1-20 characters)"
          maxlength="20"
          aria-label="Player name input, maximum 20 characters"
          aria-describedby="name-error"
          autocomplete="off"
        />
        <div id="name-error" class="name-error"></div>
      </div>
      <div class="modal-footer name-input-footer">
        <button id="cancel-name-btn" class="modal-btn cancel-btn" aria-label="Cancel and do not save score">Cancel</button>
        <button id="submit-name-btn" class="modal-btn submit-btn" aria-label="Submit player name and save score" disabled>Save Score</button>
      </div>
    </div>
  </div>
  <div id="scoreboard-section" class="scoreboard-section">
    <h2>ğŸ† Leaderboard</h2>
    <table class="scoreboard-table" aria-label="Top 10 scores leaderboard" role="table">
      <thead>
        <tr>
          <th>Rank</th>
          <th>Name</th>
          <th>Time</th>
          <th>Difficulty</th>
          <th>Hints</th>
        </tr>
      </thead>
      <tbody id="scoreboard-body">
        <tr class="empty-message">
          <td colspan="5">No scores yet. Complete a puzzle to see scores here!</td>
        </tr>
      </tbody>
    </table>
  </div>
  <script src="/static/main.js"></script>
</body>
</html>